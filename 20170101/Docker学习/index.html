<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Docker学习笔记 | 付啸的个人网站</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Docker学习笔记</h1><a id="logo" href="/.">付啸的个人网站</a><p class="description">var me = 程序员 &amp;&amp; 吃货</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Docker学习笔记</h1><div class="post-meta">Jan 1, 2017<span> | </span><span class="category"><a href="/categories/docker/">docker</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker学习笔记"><span class="toc-number">1.</span> <span class="toc-text">Docker学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简介"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本概念"><span class="toc-number">1.2.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#镜像"><span class="toc-number">1.2.1.</span> <span class="toc-text">镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分层存储"><span class="toc-number">1.2.2.</span> <span class="toc-text">分层存储</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#容器"><span class="toc-number">1.3.</span> <span class="toc-text">容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#仓库"><span class="toc-number">1.4.</span> <span class="toc-text">仓库</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="Docker学习笔记"><a href="#Docker学习笔记" class="headerlink" title="Docker学习笔记"></a>Docker学习笔记</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>基本概念</p>
<ul>
<li>镜像(Image)</li>
<li>容器(Container)</li>
<li>仓库(Repositroy)</li>
</ul>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><h4 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h4><p>Docker镜像(Image): 相当于一个<code>root</code>文件系统. 比如个官方镜像<code>ubuntu:14.04</code>就包含了一套Ubuntu14.04最小系统的<code>root</code>文件系统.</p>
<p>Docker镜像死一个特殊的文件系统, 除了提供容器运行时所需的程序, 库, 资源, 配置等文件外, 还包含了一些为运行时准备的一些配置参数(如匿名卷, 环境变量, 用户等). 镜像不包含任何动态数据, 其内容在构建之后不会被改变.</p>
<h4 id="分层存储"><a href="#分层存储" class="headerlink" title="分层存储"></a>分层存储</h4><p>利用<code>Union FS</code>技术, 分层存储架构. </p>
<p>镜像构建时, 会分层构建, 前一层是后一层的基础. 每一层构建完毕后就不会发生变化. <em>比如删除一个前一层的文件操作, 实际不是真的删除前一层的文件, 而是仅在当前层标记为该文件已删除. 在最终容器运行的时候, 虽然不会看到这个文件, 但是实际上该文件会一直跟随镜像.</em> </p>
<blockquote>
<p>在构建镜像时, 需要额外小心, 每一层尽量只包含该层需要添加的东西, 任何额外的东西应该在该层构建结束前清理掉.</p>
</blockquote>
<p>分层存储的特征还可以使得镜像复用, 定制的更为容易. 甚至可以用之前的构建好的镜像作为基础层, 然后进一步添加新的层.</p>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>镜像(Image)和容器(Container)的关系, 就像面向对象的<code>类</code>和<code>实例</code>一样. 镜像是静态的定义, 容器是镜像运行时的实体. 容器可以被创建, 启动, 停止, 删除, 暂停等.</p>
<p>容器的实质是进程, 但与直接在宿主执行的进程不同, 容器进程运行于属于自己的独立的<code>命名空间</code>. 因此容器可以拥有自己的<code>root</code>文件系统, 自己的网络配置, 自己的进程弓箭, 甚至自己的用户ID控件. 容器内的进程是运行在一个隔离的环境里. </p>
<p>容器存储层的生存周期和容器一样, 容器消亡时, 容器存储层也随之消亡. 因此任何保存于容器存储层的信息都会随容器删除而消亡.</p>
<blockquote>
<p>按照 Docker 最佳实践的要求, 容器不应该向其存储层内写入任何数据, 容器存储层要保持无状态化. 所有的文件写入操作, 都应该使用 <code>数据卷(Volume)</code>. 或者绑定宿主的目录, 在这些位置的读写会跳过容器存储层, 直接对宿主(或网络存储)发生读写, 其性能和稳定性更高.</p>
</blockquote>
<blockquote>
<p>数据卷(Volume)的生命周期独立于容器, 容器消亡, 数据卷不会消亡.</p>
</blockquote>
<h3 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h3><p>镜像完成后很容易在当前宿主上运行, 但是, 如果需要其他服务器上使用这个镜像, 就需要一个集中存储, 分发镜像的服务, 即: <code>Docker Registry</code>服务</p>
<p>一个 <code>Docker Registry</code> 中可以包含多个仓库 (Repository), 每个仓库可以包含多个标签 (Tag), 每个标签 (Tag) 对应一个镜像.</p>
<p>一般来说, 一个仓库 包含的是同一个软件的不同版本镜像, 而标签则用于对应于软件的不同版本. 可以通过<code>仓库名:标签名</code>的格式来指定具体的一个镜像. 如果不给出标签值, 则将以<code>latest</code>作为默认标签.</p>
<p>如,<code>Ubuntu镜像</code>为例, <code>Ubuntu</code>是仓库名, 仓库内有不同的版本, 使用标签<code>14.04</code>, <code>16.04</code>作为标签名来表示不同的版本. 我们可以通过: <code>Ubuntu:14.04</code>, <code>Ubuntu:16.04</code>来指定具体某一个镜像, 如果忽略了标签, 则视为<code>Ubuntu:latest</code></p>
<blockquote>
<p>仓库名经常已两段式路径形式出现, 如 <code>jwilder/nginx-proxy</code>, 前者为 Docker Registry 多用户环境下的用户名, 后则为软件名.</p>
</blockquote>
<p>常用的 Docker Registry 服务有, <code>Docker Hub</code>, CoreOS 的<code>Quay.io</code>, Google 的 <code>Google Container Registry</code>等.</p>
<p>自己可以搭建私有的 Docker Registry服务区. Docker 官网提供了 <code>Docker Registry 镜像</code>, 可以直接使用作为私有 Registry服务. </p>
</div><div class="tags"><a href="/tags/docker/">docker</a></div><div class="post-nav"><a class="pre" href="/20170221/Java8实战读书笔记/">Java8实战读书笔记</a><a class="next" href="/20170101/https/">2017年的第一天, 给自己的网站加个&quot;S&quot;</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://www.fuxiao.im"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/">杂谈</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/K8S/" style="font-size: 15px;">K8S</a> <a href="/tags/https/" style="font-size: 15px;">https</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/macos/" style="font-size: 15px;">macos</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/20190226/MAC下环境变量-PATH/">MAC下环境变量$PATH</a></li><li class="post-list-item"><a class="post-list-link" href="/20190203/使用NFS作为PersistentVolume/">使用NFS作为PersistentVolume</a></li><li class="post-list-item"><a class="post-list-link" href="/20181228/Ubuntu-K8S-1-13-kubeadm搭建集群/">Ubuntu_K8S_1.13_kubeadm搭建集群</a></li><li class="post-list-item"><a class="post-list-link" href="/20181021/CoreOS本地安装/">CoreOS本地VM安装</a></li><li class="post-list-item"><a class="post-list-link" href="/20180815/Golang学习笔记/">Golang学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/20180721/蓝鲸CMDB部署个人整理/">蓝鲸CMDB部署个人整理</a></li><li class="post-list-item"><a class="post-list-link" href="/20180610/ElasticSearch学习笔记/">ElasticSearch学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/20170723/new-web/">备案, 重新搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/20170221/Java8实战读书笔记/">Java8实战读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/20170101/Docker学习/">Docker学习笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">付啸的个人网站.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>